<!DOCTYPE html>
<html>
<head>
  <title>Track Complaint</title>
</head>
<body>
<center>
<h2>Track Your Complaint</h2>

<input type="text" id="mobile" placeholder="Enter Mobile Number">
<button onclick="trackComplaint()">Track</button>
<p id="result"></p>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBpn16zqfxH_D4WwLtuAwDGQdQ3-qMsdCc",
  authDomain: "civic-issue-reporting-to-b6f3d.firebaseapp.com",
  projectId: "civic-issue-reporting-to-b6f3d",
  storageBucket: "civic-issue-reporting-to-b6f3d.firebasestorage.app",
  messagingSenderId: "442755472602",
  appId: "1:442755472602:web:d819b368244377072f59e3"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.trackComplaint = async function() {

  const mobile = document.getElementById("mobile").value;
  const q = query(collection(db, "complaints"), where("mobile", "==", mobile));

  const querySnapshot = await getDocs(q);

  if (querySnapshot.empty) {
    document.getElementById("result").innerHTML = "No complaint found!";
  } else {
    querySnapshot.forEach((doc) => {
      document.getElementById("result").innerHTML =
        "Status: " + doc.data().status;
    });
  }
};

</script>
</center>
</body>
</html>